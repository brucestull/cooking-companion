{% extends "base.html" %}
{% load cooking_nav %}
{% block title %}Dishes{% endblock %}
{% block content %}
{% include "cooking_companion/_nav.html" %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h1 class="h3 mb-0">Dishes</h1>
    <div class="text-muted small">The conceptual thing you cook; sessions record each time.</div>
  </div>
  <a class="btn btn-primary" href="{% url 'cooking_companion:dish-add' %}">+ Add Dish</a>
</div>

<form method="get" class="row g-2 align-items-end mb-3">
  <div class="col-12 col-md-8">
    <label class="form-label">Search</label>
    <input name="q" value="{{ request.GET.q }}" class="form-control" placeholder="dish, description, default recipe">
  </div>
  <div class="col-6 col-md-2">
    <div class="form-check mt-4">
      <input class="form-check-input" type="checkbox" name="active" value="0" {% if request.GET.active == "0" %}checked{% endif %}>
      <label class="form-check-label">Show inactive</label>
    </div>
  </div>
  <div class="col-6 col-md-2">
    <button class="btn btn-primary w-100" type="submit">Filter</button>
  </div>
</form>

{% if object_list %}
  <div class="list-group shadow-sm">
    {% for d in object_list %}
      <a href="{% url 'cooking_companion:dish-detail' d.pk %}" class="list-group-item list-group-item-action">
        <div class="d-flex justify-content-between">
          <strong>{{ d.name }}</strong>
          <small class="text-muted">{{ d.session_count }} sessions</small>
        </div>
        <div class="small text-muted">{% if d.default_recipe %}Default: {{ d.default_recipe.title }} Â· {% endif %}{% if not d.is_active %}Inactive{% endif %}</div>
      </a>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-info">No dishes yet.</div>
{% endif %}
{% include "cooking_companion/_pagination.html" %}
{% endblock %}
